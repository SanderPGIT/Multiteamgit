<html>
    <head>
        <style>
        </style>
        <script>
            function lijstOpvragen(){
                var xhr=new XMLHttpRequest();
                xhr.onreadystatechange = function(){
                    if(this.readyState == 4 && this.status == 200){
                    var handler = xhr.responseText;
                    //console.log(handler);
                    var hetObject = JSON.parse(handler);
                    //console.log(hetObject);
                    lijstMaken(hetObject);
                    }
                    }

                xhr.open("GET","http://localhost:8082/product",true);
                xhr.send();
            }

            function lijstMaken(object){
                let table = document.createElement("table");
                table.border= 1;
                table.id = "ditiseentabel";
                let tr = document.createElement("tr");
                let td1 = document.createElement("th");
                td1.innerHTML= "id:";
                tr.appendChild(td1);
                let td2 = document.createElement("th");
                td2.innerHTML="naam:";
                tr.appendChild(td2);
                let td3 = document.createElement("th");
                td3.innerHTML="voorraad:";
                tr.appendChild(td3);
                table.appendChild(tr);
                for(i=0;i<object.length;i++){
                    let tr = document.createElement("tr");
                    let td1 = document.createElement("td");
                    td1.innerHTML= object[i].id;
                    tr.appendChild(td1);
                    let td2 = document.createElement("td");
                    td2.innerHTML=object[i].name;
                    tr.appendChild(td2);
                    let td3 = document.createElement("td");
                    td3.innerHTML=object[i].stock;
                    tr.appendChild(td3);
                    let td4 = document.createElement("img");
                    td4.src="data:image/png;base64," + object[i].datafoto;
                    td4.height=150;
                    td4.width=150;
                    tr.appendChild(td4);
                    table.appendChild(tr);
                    
                }
                document.getElementById("resultaat").appendChild(table);
                if(document.getElementById("resultaat").children.length > 1){
                    document.getElementById("resultaat").removeChild(document.getElementById("resultaat").children[0]);
                }
            }

            

           
        </script>
    </head>
    <body>
        <h1>producten</h1>
        <input type=button value="krijg producten" onclick="lijstOpvragen()">
        <div id="resultaat"></div>
        </form>
    </body>
</html>